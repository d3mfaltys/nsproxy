<!DOCTYPE HTML>
<html>
<head>

    <script type="text/javascript">
         function initConnection()
         {
               var ws = new WebSocket("ws://localhost:3000/ws");

               ws.onmessage = function (evt)
               {
				   var writezone = document.getElementById("hostzone")
				  writezone.innerHTML = ""
				  hosts = evt.data.split(' ');

				  var proString = "<table>"
				  for (var i = 1;i < hosts.length;i++){
					  var array = hosts[i].split(','),
					      hostname = array[0], ip = array[1]
					  //writezone.innerHTML = writezone.innerHTML + "<div class=\"bullet livehost\"><\/div>" + hostname + " " + ip + "<br>";
				      proString = proString + "<tr><td>" + "<div class=\"bullet livehost\"><\/div>" + hostname + "<\/td><td>" + ip + "<\/td>" + "<\/tr>";
				  }
				  proString = proString + "<\/table>";
				  writezone.innerHTML = proString;
               };

               ws.onclose = function()
               {
                  var writezone = document.getElementById("hostzone");
				  writezone.innerHTML = writezone.innerHTML.replace(/livehost/i, 'midhost');
				  writezone.innerHTML = writezone.innerHTML.split('livehost').join('midhost');
				  writezone.innerHTML = writezone.innerHTML + "<br>" + "<div class=\"bullet downhost\"><\/div>connection to server closed";
               };

         }
		 window.onload = initConnection;
    </script>
	<link rel="stylesheet" href="/style.css">
</head>
<body>
<!--
<button onclick="javascript:initConnection()">follow hosts</button>
-->
<div id="hostzone"></div>
</body>
</html>
